{"version":3,"sources":["../src/HttpClient.js"],"names":["DEFAULT_HEADERS","DEFAULT_REQUEST_OPTIONS","timeout","HttpClient","constructor","options","proxy","host","port","split","agentOptions","secureProxy","baseRequestOptions","agent","http","HttpProxyAgent","https","HttpsProxyAgent","request","url","reqOptions","headers"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAGA,MAAMA,kBAAkB;AACtB,gBAAc;AADQ,CAAxB;AAGA,MAAMC,0BAA0B;AAC9BC,WAAS;AADqB,CAAhC;;AAKA,MAAMC,UAAN,CAAiB;AAKfC,cAAYC,UAAU,EAAtB,EAA0B;AAAA,kEAHrBJ,uBAGqB;;AACxB,QAAII,QAAQC,KAAZ,EAAmB;AACjB,UAAI,CAACC,IAAD,EAAOC,IAAP,IAAeH,QAAQC,KAAR,CAAcG,KAAd,CAAoB,GAApB,CAAnB;AACA,UAAIC,eAAe;AAAEH,YAAF;AAAQC,YAAR;AAAcG,qBAAa;AAA3B,OAAnB;AAEA,WAAKC,kBAAL,CAAwBC,KAAxB,GAAgC;AAC9BC,cAAM,IAAIC,uBAAJ,CAAmBL,YAAnB,CADwB;AAE9BM,eAAO,IAAIC,wBAAJ,CAAoBP,YAApB;AAFuB,OAAhC;AAID;AACF;;AAEDQ,UAAQC,GAAR,EAAaC,aAAa,EAA1B,EAA8B;AAC5B,QAAIC,OAAJ;;AAEA,QAAID,WAAWC,OAAf,EAAwB;AACtBA,kCAAerB,eAAf,EAAmCoB,WAAWC,OAA9C;AACD,KAFD,MAEO;AACLA,gBAAUrB,eAAV;AACD;;AAEDoB,mCACK,KAAKR,kBADV,EAEKQ,UAFL;AAGEC;AAHF;AAMA,WAAO,kBAAIF,GAAJ,EAASC,UAAT,CAAP;AACD;;AAjCc;;eAqCFjB,U","sourcesContent":["import got from 'got'\nimport HttpsProxyAgent from 'https-proxy-agent'\nimport HttpProxyAgent from 'http-proxy-agent'\n\n\nconst DEFAULT_HEADERS = {\n  'user-agent': 'stremio-porn',\n}\nconst DEFAULT_REQUEST_OPTIONS = {\n  timeout: 20000,\n}\n\n\nclass HttpClient {\n  baseRequestOptions = {\n    ...DEFAULT_REQUEST_OPTIONS,\n  }\n\n  constructor(options = {}) {\n    if (options.proxy) {\n      let [host, port] = options.proxy.split(':')\n      let agentOptions = { host, port, secureProxy: true }\n\n      this.baseRequestOptions.agent = {\n        http: new HttpProxyAgent(agentOptions),\n        https: new HttpsProxyAgent(agentOptions),\n      }\n    }\n  }\n\n  request(url, reqOptions = {}) {\n    let headers\n\n    if (reqOptions.headers) {\n      headers = { ...DEFAULT_HEADERS, ...reqOptions.headers }\n    } else {\n      headers = DEFAULT_HEADERS\n    }\n\n    reqOptions = {\n      ...this.baseRequestOptions,\n      ...reqOptions,\n      headers,\n    }\n\n    return got(url, reqOptions)\n  }\n}\n\n\nexport default HttpClient\n"],"file":"HttpClient.js"}